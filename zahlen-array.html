<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zahlen-Array</title>
  </head>
  <body>
    <div>
      Inhalt einfügen: <input type="number" id="numberInputField" />
      <button class="button" id="numberInputButton" onclick="addNumber()">
        Einfügen
      </button>
    </div>

    <div>
      ID Löschen: <input type="number" id="deleteIdField" />
      <button class="button" id="idDeleteButton" onclick="deleteNumberById()">
        Löschen
      </button>
    </div>

    <div>
      Content Löschen: <input type="number" id="deleteContentField" />
      <button
        class="button"
        id="deleteContentButton"
        onclick="deleteNumberByNumber()"
      >
        Löschen
      </button>
    </div>

    <div>
      <button class="button" id="showButton" onclick="showArray()">
        Anzeigen
      </button>
      <button class="button" id="multiplyButton" onclick="multiplyArray()">
        Multipliziere (x2)
      </button>
      <button class="button" id="summButton" onclick="sumArray()">Summe</button>
    </div>

    <script>
      "use strict";
      let numberArray = [10, 20, 30];

      // Füge dem Array eine Zahl hinzu
      function addNumber() {
        const addNumber = document.getElementById("numberInputField").value;
        if (!isItANumber(addNumber)) {
          console.log(
            `Eingabefehler in "Inhalt einfügen": "${addNumber}" ist keine Zahl!`
          );
          clearInputField("numberInputField");
          return;
        }

        numberArray.push(Number(addNumber));
        clearInputField("numberInputField");
        console.log(numberArray);
      }

      // Lösche ein Element im Array durch seine Position
      function deleteNumberById() {
        const elementPosition = document.getElementById("deleteIdField").value;
        if (!isItANumber(elementPosition)) {
          console.log(
            `Eingabefehler in "ID Löschen": "${elementPosition}" ist keine Zahl!`
          );
          clearInputField("deleteIdField");
          return;
        } else if (elementPosition >= numberArray.length) {
          console.log(
            `Eingabefehler in "ID Löschen": Die Eingabe (${elementPosition}) muss kleiner als "${numberArray.length}" sein!`
          );
          clearInputField("deleteIdField");
          return;
        }
        numberArray.splice(elementPosition, 1);
        clearInputField("deleteIdField");
        console.log(numberArray);
      }

      // Lösche ein Element im Array durch den Inhalt
      function deleteNumberByNumber() {
        let numberToFind;
        const delNumber = document.getElementById("deleteContentField").value;
        if (!isItANumber(delNumber)) {
          console.log(
            `Eingabefehler in "Content Löschen": "${delNumber}" ist keine Zahl!`
          );
          clearInputField("deleteContentField");
          return;
        }

        numberToFind = numberArray.findIndex(
          (num) => num === Number(delNumber)
        );
        if (numberToFind != -1) {
          numberArray.splice(numberToFind, 1);
        } else {
          console.log(
            `Fehler in "Content Löschen": "${delNumber}" nicht gefunden!`
          );
          return;
        }

        clearInputField("deleteContentField");
        console.log(numberArray);
      }

      // Zeigen den Inhalt vom Array an
      function showArray() {
        console.log(numberArray);
      }

      // Multipliziere den gesamten Array
      function multiplyArray() {
        if (numberArray.length === 0) {
          console.log(`Fehler mit dem Multiplizieren: numberArray ist leer!`);
          return;
        }

        const multyplyNumberArray = numberArray.map((num) => num * 2);
        // Geht nur, wenn numberArray mit let deklariert wurde!
        numberArray = multyplyNumberArray;
        console.log(numberArray);
      }

      // Summiere den den gesamten Array
      function sumArray() {
        if (numberArray.length === 0) {
          console.log(`Fehler mit der Summierung: numberArray ist leer!`);
          return;
        }

        const reduceArray = numberArray.reduce(
          (previousValue, currentValue) => {
            return previousValue + currentValue;
          }
        );
        numberArray.splice(0, numberArray.length, reduceArray);
        console.log(numberArray);
      }

      // Lösche das Eingabefeld
      function clearInputField(id) {
        if (!document.getElementById(id)) {
          console.log(
            `Fehler beim Löschen des Eingabefeldes: ID ${id} nicht gefunden!`
          );
          return false;
        }
        document.getElementById(id).value = "";
      }

      // Testet einen String, ob er nur Nummern enthält
      function isItANumber(testNumber) {
        const regex = /^[0-9]+$/;

        if (regex.test(testNumber)) {
          return true;
        } else {
          return false;
        }
      }
    </script>
  </body>
</html>
